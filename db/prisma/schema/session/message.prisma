enum SessionMessageStatus {
  waiting_for_response
  failed
  succeeded
}

enum SessionMessageType {
  tool_call
  mcp_control
  unknown
}

enum SessionMessageSource {
  client
}

model SessionMessage {
  oid        BigInt @id
  id         String @unique
  toolCallId String @unique

  status SessionMessageStatus
  type   SessionMessageType
  source SessionMessageSource

  /// [SessionMessageClientMcpId]
  clientMcpId Json

  /// [SessionMessageInput]
  input Json

  /// [SessionMessageOutput]
  output Json?

  methodOrToolKey String?
  isViaMcp        Boolean

  sessionOid BigInt
  session    Session @relation(fields: [sessionOid], references: [oid])

  connectionOid BigInt?
  connection    SessionConnection? @relation(fields: [connectionOid], references: [oid])

  providerRunOid BigInt?
  providerRun    ProviderRun? @relation(fields: [providerRunOid], references: [oid])

  toolOid BigInt?
  tool    ProviderTool? @relation(fields: [toolOid], references: [oid])

  slateToolCallOid BigInt?
  slateToolCall    SlateToolCall? @relation(fields: [slateToolCallOid], references: [oid])

  createdAt   DateTime  @default(now())
  completedAt DateTime?

  sessionEvents SessionEvent[]
}
