enum SessionTemplateStatus {
  active
  inactive
  deleted
}

model SessionTemplate {
  oid BigInt @id
  id  String @unique

  status SessionTemplateStatus

  name        String?
  description String?
  metadata    Json?

  tenantOid BigInt
  tenant    Tenant @relation(fields: [tenantOid], references: [oid])

  solutionOid Int
  solution    Solution @relation(fields: [solutionOid], references: [oid], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  providers        SessionTemplateProvider[]
  sessionProviders SessionProvider[]

  @@index([status])
}

enum SessionTemplateProviderStatus {
  active
  inactive
  deleted
}

model SessionTemplateProvider {
  oid BigInt @id
  id  String @unique

  status SessionTemplateProviderStatus

  /// [ToolFilter]
  toolFilter Json

  sessionTemplateOid BigInt
  sessionTemplate    SessionTemplate @relation(fields: [sessionTemplateOid], references: [oid])

  providerOid BigInt
  provider    Provider @relation(fields: [providerOid], references: [oid])

  deploymentOid BigInt
  deployment    ProviderDeployment @relation(fields: [deploymentOid], references: [oid])

  configOid BigInt
  config    ProviderConfig @relation(fields: [configOid], references: [oid])

  authConfigOid BigInt?
  authConfig    ProviderAuthConfig? @relation(fields: [authConfigOid], references: [oid])

  tenantOid BigInt
  tenant    Tenant @relation(fields: [tenantOid], references: [oid])

  solutionOid Int
  solution    Solution @relation(fields: [solutionOid], references: [oid], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  sessionProviders SessionProvider[]

  @@index([status])
}
