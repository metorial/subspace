enum ProviderAuthCredentialsStatus {
  active
  archived
  deleted
}

enum ProviderAuthCredentialsType {
  oauth
}

model ProviderAuthCredentials {
  oid BigInt @id
  id  String @unique

  type   ProviderAuthCredentialsType
  status ProviderAuthCredentialsStatus

  isEphemeral Boolean
  isDefault   Boolean

  name        String?
  description String?
  metadata    Json?

  tenantOid BigInt
  tenant    Tenant @relation(fields: [tenantOid], references: [oid])

  environmentOid BigInt
  environment    Environment @relation(fields: [environmentOid], references: [oid], onDelete: Cascade)

  solutionOid Int
  solution    Solution @relation(fields: [solutionOid], references: [oid], onDelete: Cascade)

  providerOid BigInt
  provider    Provider @relation(fields: [providerOid], references: [oid])

  backendOid BigInt
  backend    Backend @relation(fields: [backendOid], references: [oid])

  slateCredentialsOid BigInt?                @unique
  slateCredentials    SlateOAuthCredentials? @relation(fields: [slateCredentialsOid], references: [oid])

  shuttleCredentialsOid BigInt?                  @unique
  shuttleCredentials    ShuttleOAuthCredentials? @relation(fields: [shuttleCredentialsOid], references: [oid])

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  providerOAuthSetups        ProviderOAuthSetup[]
  providerSetupSessions      ProviderSetupSession[]
  providerAuthConfigVersions ProviderAuthConfigVersion[]
  providerAuthConfigs        ProviderAuthConfig[]

  @@index([isDefault])
  @@index([status])
  @@index([type])
}
